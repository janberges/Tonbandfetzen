.\" Man page for the command mel of the Tonbandfetzen tool box
.TH MEL 1 2020 "Jan Berges" "Tonbandfetzen Manual"
.SH NAME
mel \- generate sound fragments from plain text
.SH SYNOPSIS
.BI mel
.IR infile
.IR outfile
.SH DESCRIPTION
.PP
Interpret ASCII input in
.IR infile
as audio and save it to
.IR outfile
in the WAVE format.
The syntax for
.IR infile
is given below.
.SH SYNTAX
.PP
The input shall be a sequence words
.IR w
(lowercase letters
.IR a " to " z ),
numbers
.IR n
(digits
.IR 0 " to " 9 ,
decimal points
.IR . ,
and a dividing colon
.IR : ),
and commands (other ASCII characters).
Commands are followed by words and/or numbers as arguments, as listed below.
The input is processed linearly, whereby unexpected characters, including whitespace, act as separators and are otherwise ignored.
.TP
.BI ~ w " " n
Choose wave sample of shape
.IR w
and duration
.IR n
in seconds.
This is the building block for sound at arbitrary frequency and amplitude.
Predefined values for
.IR w
are listed below.
The corresponding spectra are shown by the command
.BI harmonics
.IR w .
If
.IR n
is zero, the first channel of the WAVE file
.IR w .wav
in the working directory is loaded instead.
The default is a
.IR circular
wave that lasts
.IR 1
second.
.RS
.TP
.IR harmonic
sin(x) for x in (0, 2\[*p]]
.TP
.IR power
sin\[S3](x) for x in (0, 2\[*p]]
.TP
.IR major
sin\[u2075](x) for x in (0, 2\[*p]]
.TP
.IR constant
sgn(sin(x)) for x in (0, 2\[*p]]
.TP
.IR linear
2/\[*p] arcsin(sin(x)) for x in (0, 2\[*p]]
.TP
.IR quadratic
sgn(x) (2|x| - x\[S2]) for x in (-2, 2]
.TP
.IR circular
sgn(x) sqrt(2|x| - x\[S2]) for x in (-2, 2]
.TP
.IR cubic
3/2 sqrt(3) (x\[S3] - x) for x in (-1, 1]
.TP
.IR random
white noise
.RE
.TP
.BI S w " " n
Choose attack envelope of shape
.IR w
and duration
.IR n
in seconds.
Predefined values for
.IR w
are listed below.
The default is a
.IR circular
envelope that lasts
.IR 0.1
seconds.
.RS
.TP
.IR harmonic
sin(x) for x in (0, \[*p]/2)
.TP
.IR smooth
sin\[S2](x) for x in (0, \[*p]/2)
.TP
.IR power
sin\[S3](x) for x in (0, \[*p]/2)
.TP
.IR major
sin\[u2075](x) for x in (0, \[*p]/2)
.TP
.IR linear
x for x in (0, 1)
.TP
.IR quadratic
1 - x\[S2] for x in (-1, 0)
.TP
.IR circular
sqrt(1 - x\[S2]) for x in (-1, 0)
.TP
.IR cubic
3x\[S2] - 2x\[S2] for x in (0, 1)
.RE
.TP
.BI Z w " " n
Choose release envelope. Arguments as above.
.TP
.BI N w " " n
Choose attack and release envelope at once. Arguments as above.
.TP
.BI $ n
Set a sample rate of
.IR n
samples per second.
The default is
.IR 44100
samples per second.
This setting holds globally and is ignored after first note played.
.TP
.BI * n
Set number of channels to
.IR n .
The default is
.IR 2 .
This setting holds globally and is ignored after first note played.
.TP
.BI | n
Set duration of a beat to
.IR n
seconds.
The default is
.IR 0.5
seconds.
.TP
.BI @ n
Set concert pitch A4 to
.IR n
Hz.
The default is
.IR 440
Hz.
.TP
.BI # n
Divide one octave into
.IR n
halftones.
The default is
.IR 12
halftones.
.TP
.BI = n
Set reference frequency to
.IR n
Hz.
The default is the concert pitch A4.
.TP
.BI & n
Set reference amplitude sqrt(L\[S2] + R\[S2]) to
.IR n
arb. units.
The default is
.IR 1
arb. unit.
.TP
.BI % n
Set reference amplitude ratio R:L between right and left channel to
.IR n .
The default is
.IR 1 .
.TP
.BI "C C# D D# E F F# G G# A B" n
Set reference frequency via scientific pitch notation.
.IR n
is the octave number.
.BI A 4
is the concert pitch.
.TP
.BI ' n
Play sound for a duration of
.IR n
beats.
.TP
.BI \(dq n
Pause for a duration of
.IR n
beats.
.TP
.BI ` n
Rewind by
.IR n
beats.
(Negative pause.)
.TP
.BI "- +" n
Set frequency to
.IR n
halftones below/above the reference.
.TP
.BI "\e /" n
Continuously lower/raise frequency by
.IR n
halftones during the next play period
.RB ( ' ).
.TP
.BI "_ ^" n
Continuously lower/raise frequency by
.IR n
halftones per beat from now on.
.TP
.BI "? !" n
Set amplitude to
.IR n
dB below/above the reference.
.TP
.BI "< >" n
Continuously lower/raise amplitude by
.IR n
db during the next play period
.RB ( ' ).
.TP
.BI ", ;" n
Continuously lower/raise amplitude by
.IR n
db per beat from now on.
.TP
.BI "[ ]" n
Set amplitude ratio to
.IR n
dB below/above the reference.
.TP
.BI "( )" n
Continuously lower/raise amplitude ratio by
.IR n
db during the next play period
.RB ( ' ).
.TP
.BI "{ }" n
Continuously lower/raise amplitude ratio by
.IR n
db per beat from now on.
.TP
.BI M n
Set
.IR n th
mark at current position in time.
.IR n
must be an integer between
.IR 0 " and " 99 .
.TP
.BI W n
Wind to
.IR n th
mark.
.TP
.BI P n " " n'
Paste copy of sound between
.IR n th
and
.IR n' th
mark.
.TP
.BI R n " " n' " " n\(dq
Repeat copy of sound between
.IR n th
and
.IR n' th
mark
.IR n\(dq
times.
